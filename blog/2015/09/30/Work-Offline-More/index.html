
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Work Offline More - Artsy Engineering</title>
  <meta name="author" content="">

  
  <meta name="description" content="
  

    



  
    
      
        
          
        
        
          Work Offline More
        
          
  



  

  
    
      Orta Ther...">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta property="og:image" content="http://artsy.github.io/images/artsy_oss_image.png" />
  <meta property="og:image:type" content="image/png" />

  
  <link rel="canonical" href="http://artsy.github.io/blog/2015/09/30/Work-Offline-More/">
  <link rel="alternate" type="application/rss+xml" title="Artsy Engineering Blog" href="/feed">

  <link href="/favicon.ico" rel="icon">
  <link href="/css/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

  <script src="/javascripts/jquery-1.11.3.min.js"> </script>
  <script src="/javascripts/gradient-fade.js"></script>
  <script src="/javascripts/noframework.waypoints.min.js"></script>
  <script src="/javascripts/sticky.min.js"></script>
  <script src="/javascripts/search.min.js"></script>

  

  <script type="text/javascript" src="https://fast.fonts.net/jsapi/f7f47a40-b25b-44ee-9f9c-cfdfc8bb2741.js"></script>


  <link href="" rel="alternate" title="Artsy Engineering" type="application/atom+xml">
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-12450662-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  <!--[if IE 8]><link href="/stylesheets/custom/ie_font.css" type="text/css"><![endif]-->

</head>


<body>
  <div id="logo-container">
    <a id="lrg-mark" href="https://www.artsy.net/">
      <svg viewBox="0 0 510 510" width="40" height="40" xmlns="http://www.w3.org/2000/svg">
        <path transform="scale(1, -1) translate(0, -480)" d="M0 -32h512v512h-512v-512v0zM464 16h-80v80h-48v-80h-288v416h416v-416v0zM194 384h-40l-74 -186h38l20 52h72l19 -52h39l-74 186v0zM149 282l25 66l24 -66h-49v0z"/>
      </svg>
    </a>
  </div>
  <header id="banner"><div id="header">
  <div class="header-navigation">
    <ul>
      <li><a href="https://developers.artsy.net/">API</a></li>
      <li><a href="https://www.artsy.net/jobs">Careers</a></li>
      <li><a href="http://twitter.com/artsyopensource">@artsyopensource</a></li>
      <li><a href="http://www.artsy.net/">Artsy.net</a></li>
    </ul>
    <span class="header-section-title">
      
        <a href="/open-source">Open Source</a>
      
    </span>
  </div>

  <div class="header-sticky-container">
    <div class="header-logo">
      <h2><a href="http://artsy.github.io">Artsy</a></h2>
    </div>
    <div class="header-search">
      
        <h2><a href="/">Engineering Blog</a></h2>
        <span>
  <form action="/search" method="get">
    <input class="search" id="search-query" type="text" name="q" results="0" placeholder="Search"/>
  </form>

</span>
      
    </div>
  </div>
</div>
</header>
  <div class="header-hamburger">
    <button class="cmn-toggle-switch cmn-toggle-switch__htx">
      <span>toggle menu</span>
    </button>
  </div>
  <div id="main">
    <div id="content">

      <div>
  <article class="hentry" role="article">

    
<div class="article-container-single ">


  
    <div class="meta-container">
      <header>
        
          <a href="">
        
        
          <h2 class="entry-title">Work Offline More</h2>
        
          <p class="meta-author">
  



  

  
    <div class="meta">
      <span class="byline author vcard"><a href ="/author/orta">Orta Therox<a/></span>
      
      <p class="fn">
        <a href="https://twitter.com/orta">@orta</a>
      </p>
      

    </div>
  

</p>
          </a>
      </header>
    </div>
  

  <div class="content-container">
    
      <div class="entry-content"><p>Want to know what I love writing in a pull request? <em>Sorry this is such a big PR, but I was working offlineâ€¦</em> It is one of <a href="https://github.com/artsy/Emergence/pull/23">the</a> <a href="https://github.com/artsy/Emergence/pull/39">key</a> <a href="https://github.com/artsy/Emergence/pull/45">reasons</a> I managed to get our <a href="https://github.com/artsy/emergence">Artsy Shows TV</a> app released ahead of schedule with a looming unknown App Store <a href="https://github.com/artsy/Emergence/issues?q=milestone%3A%221.0+Ship+to+Apple%22">deadline</a>. Offering more time for polish like thumbnail image <a href="https://github.com/artsy/Emergence/compare/84855a310d47e071419b52b78978d14d751ec4e0...40966752111a309a20b4878e00a1c8e27cb53261">pre-caching</a>.</p>

<p>During the last week before shipping I was scheduled to get a H1B VISA stamp for my passport, which means a trip to London. London is basically a <strong>million</strong> miles away from where I occasionally live in Huddersfield. So I opted for a coach. On the 5 and a half hours of travel, I had gone from behind schedule to feature complete prototype. On the way back, I had started to remove the word prototype from what we were looking at.</p>

<p>I <em>always</em> optimise to work offline on every iOS project. Here's some tips on how we do it in all our apps.</p>

<!-- more -->


<a name="Easiest.way"></a>
<h3>Easiest way</h3>

<p>Eigen, our biggest app, has a complicated relationship with our API. There are too many networking calls to effectively stub for development in the app, this I know because I wrote <a href="https://github.com/artsy/eigen/pull/575">the PR</a> forcing us to stub all networking in tests.</p>

<p>I found a great workaround though: there is a tool for storing an entire networking session, so that you can use it again and get determinate results called <a href="http://cocoapods.org/pods/VCRURLConnection">VCRURLConnection</a>. This is normally done in tests but it can easily be used in your app code instead.</p>

<p>We already had an admin panel within our app. So I added the ability to start <a href="https://github.com/artsy/eigen/blob/06aeb6f7ce4b95155729aa37c36fddc54767931f/Artsy/View_Controllers/Admin/ARAdminSettingsViewController.m#L171-L206">saving the networking session</a>.</p>

<p><img src="/images/2015-09-30-offline/eigen-admin.png" alt="Eigen Admin Panel" /></p>

<p>When you hit save, every networking request is saved into memory, and then once you hit save, this is stored in a JSON file that the app will use that for all networking data on the next few runs.</p>

<a name="The..requires.some.work..but.is.worth.it..way"></a>
<h3>The "requires some work, but is worth it" way</h3>

<p><a href="https://github.com/Moya/Moya">Moya</a> is a networking client we created where stubbed data is a first-class citizen. This means converting your app's networking from "uses the API" to "uses the <a href="https://github.com/artsy/eidolon/blob/master/Kiosk/App/StubResponses.m">locally stored stubbed examples</a>." Is a quick change in your apps code.</p>

<a name="The..let.s.just.get.it.done..way"></a>
<h3>The "let's just get it done" way</h3>

<p>When I was working offline on the coach, I took a technique we use for testing and applied it to our application code. We use an abstraction called network models that separates what you want vs. what the API does to get it. In the case of Emergence I created <a href="https://github.com/artsy/Emergence/blob/18e501a4d6925ea5fb0f35174a6c0c3c96f70533/Emergence/Contexts/Presenting%20a%20Show/ShowNetworkingModel.swift">requests</a> that would pass along stubbed models instead of doing the real work.</p>

<p>It's nothing fancy, but I didn't need too much to work with at this point. It's enough to start building, which is what counts, you can go and test properly once you're online.</p>

<a name="Motivation"></a>
<h3>Motivation</h3>

<p>I don't use 3G on my phone, I rely entirely on Wi-Fi for internet access, and don't particularly have a problem with the lack of connection. The outside world is distracting enough. Being able to work offline means I can shut the world out for a while and just focus on getting something done.</p>

<p>It's possible to not just have less distractions, but to be able to work faster. <code>VCRURLConnection</code> and using stubs are faster than normal networking, so you can iterate faster on your app, too.</p>

<p>True to my word, I'm writing this blog post offline, I have 7 hours and 23 more minutes before the plane lands in JFK.</p>

<p>I'm going to use the rest of this time to try ship something hard.</p>

<p><code>&lt;edit&gt;</code>I built this: <a href="https://github.com/artsy/energy/pull/86">artsy/energy/pull/86</a>. <code>&lt;/edit&gt;</code></p>
</div>
    

    
      <p class="meta-author">
        
  





<div class="meta">
  Posted by


  

  
    <span class="byline author vcard">

      <div class="meta"><span class="fn"><a href="/author/orta">
        Orta Therox
      </a></span></div>

      
      <span class="fn">
        <a href="http://orta.io">Site</a>
      </span>
      
      
      <span class="fn">
        <a href="https://github.com/orta">GitHub</a>
      </span>
      
      
      <span class="fn">
        <a href="https://twitter.com/orta">@orta</a>
      </span>
      
    </span>

  
</div>




      </p>
      <p class="meta-categories">
        Categories: 

<span class="categories">
  
    <a class='category' href='/blog/categories/flow/'>flow</a>, <a class='category' href='/blog/categories/ios/'>ios</a>, <a class='category' href='/blog/categories/mobile/'>mobile</a>, <a class='category' href='/blog/categories/process/'>process</a>
  
</span>


      </p>
      

      

      <p class="meta-paginate">
        
          <a class="previous" href="/blog/2015/09/24/splitting-up-a-large-test-suite/" title="Previous Post: Splitting up a large test suite">&laquo; Splitting up a large test suite</a>
        
        
          <a class="next" href="/blog/2015/11/05/Emergence-Code-Review/" title="next Post: Code Review: Emergence">Code Review: Emergence &raquo;</a>
        
      </p>
    
  </div>


  <footer>
  </footer>

</div>


  </article>
</div>


    </div>
  </div>
  <footer id="main_footer"> <div class="footer-navigation">
  <ul>
    <li><a href="https://developers.artsy.net/">API</a></li>
    <li><a href="https://www.artsy.net/jobs">Careers</a></li>
    <li><a href="http://twitter.com/artsyopensource">@artsyopensource</a></li>
    <li><a href="http://www.artsy.net/">Artsy.net</a></li>
  </ul>
</div>




</footer>
  <script type="text/javascript">
  $(function() {
    // TODO: Move this whole file to a javascript file that is included in the footer

    // Main sticky header
    if ($(window).width() >= 700) {
      var sticky = new Waypoint.Sticky({
        element: $("#banner"),
        offset: -100
      });
    }

    // Toggle hamburger menu
    $('.header-hamburger').click(function() {
      $('#banner, .cmn-toggle-switch').toggleClass('active');
      if (location.pathname == '/open-source') {
        $('.header-search span').hide();
        $('#page-sidebar').toggle();
      }
    });

    // Toggle search focus on mobile
    $('input.search').focus(function() {
      $('#header').addClass('search-focused');
    }).blur(function() {
      $('#header').removeClass('search-focused');
    });
  });
</script>

</body>
</html>
